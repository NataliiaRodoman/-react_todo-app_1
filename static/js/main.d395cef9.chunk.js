(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(9),r=(n(18),n(19),n(20),n(7)),o=n(2),a=n(5),s=n(4),u=n(1),i=n.n(u),l=function(e){return e.NotAdded="Unable to add a todo",e.NotDeleted="Unable to delete a todo",e.NotUpdated="Unable to update a todo",e.Issue="There is an issue.",e.DownloadError="Failed to load todos",e}({}),d=function(e){return e.ALL="All",e.ACTIVE="Active",e.COMPLETED="Completed",e}({});function p(e){var t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch("https://mate.academy/students-api"+e,c)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var f=function(e){return p(e)},b=function(e,t){return p(e,"POST",t)},j=function(e,t){return p(e,"PATCH",t)},m=function(e){return p(e,"DELETE")},h=n(3),O=n.n(h),v=n(0),x=function(e){var t=e.querySearch,n=e.setQuerySearch,c=e.handleAddTodo,r=e.selectAllTodos,o=e.isAllTodosCompleted;return Object(v.jsxs)("header",{className:"todoapp__header",children:[Object(v.jsx)("button",{type:"button",className:O()("todoapp__toggle-all",{active:o}),onClick:r}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault(),c(),n("")},children:Object(v.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:t,onChange:function(e){return n(e.target.value)}})})]})},C=i.a.memo((function(e){var t=e.todo,n=e.onDelete,c=e.onChangeStatus,r=Object(u.useContext)(i.a.createContext([0])),o=Object(u.useState)(!1),a=Object(s.a)(o,2),l=a[0],d=a[1],p=Object(u.useState)(t.title),f=Object(s.a)(p,2),b=f[0],j=f[1],m=Object(u.useRef)(null),h=function(){b!==t.title?(b.trim()||n(t.id),c(t.id,{title:b}),d(!1)):d(!1)};return Object(u.useEffect)((function(){l&&m.current&&m.current.focus()}),[l]),Object(v.jsxs)("div",{className:O()("todo",{completed:t.completed}),children:[Object(v.jsx)("label",{className:"todo__status-label",children:Object(v.jsx)("input",{type:"checkbox",className:"todo__status",onChange:function(){c(t.id,{completed:!t.completed})}})}),l?Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault(),h()},children:Object(v.jsx)("input",{ref:m,type:"text",className:"todo__title-field",placeholder:"Empty todo will be deleted",value:b,onChange:function(e){j(e.target.value)},onBlur:h,onKeyUp:function(e){"Escape"===e.key&&(d(!1),j(t.title))}})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{className:"todo__title",onDoubleClick:function(){return d(!0)},children:t.title}),Object(v.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return n(t.id)},children:"\xd7"})]}),Object(v.jsxs)("div",{className:O()("modal overlay",{"is-active":r.includes(t.id)}),children:[Object(v.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(v.jsx)("div",{className:"loader"})]})]})})),k=i.a.memo((function(e){var t=e.todos,n=e.tempTodo,c=e.onDelete,r=e.onChange;return Object(v.jsxs)("section",{className:"todoapp__main","data-cy":"TodoList",children:[t.map((function(e){return Object(v.jsx)(C,{todo:e,onDelete:c,onChangeStatus:r},e.id)})),n&&Object(v.jsx)(C,{todo:n,onDelete:c,onChangeStatus:r},0)]})})),y=function(e){var t=e.todosShow,n=e.filterBy,c=e.setFilterBy,r=e.deleteTodoCompleted,o=t.filter((function(e){return!e.completed})).length,a=t.filter((function(e){return e.completed})).length;return Object(v.jsxs)("footer",{className:"todoapp__footer",children:[Object(v.jsx)("span",{className:"todo-count",children:n!==d.COMPLETED?"".concat(o," items left"):"".concat(a," items left")}),Object(v.jsxs)("nav",{className:"filter",children:[Object(v.jsx)("a",{href:"#/",className:O()("filter__link",{selected:n===d.ALL}),onClick:function(){return c(d.ALL)},children:"All"}),Object(v.jsx)("a",{href:"#/active",className:O()("filter__link",{selected:n===d.ACTIVE}),onClick:function(){return c(d.ACTIVE)},children:"Active"}),Object(v.jsx)("a",{href:"#/completed",className:O()("filter__link",{selected:n===d.COMPLETED}),onClick:function(){return c(d.COMPLETED)},children:"Completed"})]}),Object(v.jsx)("button",{type:"button",className:O()("todoapp__clear-completed",{opacity:0===a}),onClick:r,children:"Clear completed"})]})},N=function(e){var t=e.onClose,n=e.error,c=e.onErrorChange;return Object(u.useEffect)((function(){var e=setTimeout((function(){c(null)}),3e3);return function(){return clearTimeout(e)}}),[n]),Object(v.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal",children:[Object(v.jsx)("button",{type:"button",className:"delete",onClick:t}),n]})},_=10552,E=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(u.useState)(null),p=Object(s.a)(i,2),h=p[0],O=p[1],C=Object(u.useState)(""),E=Object(s.a)(C,2),T=E[0],w=E[1],g=Object(u.useState)(d.ALL),A=Object(s.a)(g,2),S=A[0],D=A[1],L=Object(u.useState)(null),I=Object(s.a)(L,2),P=I[0],U=I[1],M=Object(u.useMemo)((function(){return n.filter((function(e){switch(S){case d.ACTIVE:return!e.completed;case d.COMPLETED:return e.completed;case d.ALL:default:return e}}))}),[S,n]),B=function(){var e=Object(a.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("/todos?userId=".concat(_));case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O(l.DownloadError);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){B()}),[]);var F=function(){var e=Object(a.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={userId:_,completed:!1,title:T},e.prev=1,T.trim()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n=t,b("/todos?/userId=".concat(_),n);case 6:return U(Object(r.a)({id:0},t)),e.next=9,B();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),O(l.NotAdded);case 14:return e.prev=14,U(null),e.finish(14);case 17:case"end":return e.stop()}var n}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(a.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.filter((function(e){return e.id!==t})),c(r),e.next=5,m("/todos/".concat(t));case 5:return e.next=7,B();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O(l.NotDeleted);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(a.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.filter((function(e){return e.completed})).forEach((function(e){return V(e.id)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(a.a)(Object(o.a)().mark((function e(t){var a,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.map((function(e){return e.id===t?Object(r.a)(Object(r.a)({},e),{},{completed:!e.completed}):e})),c(a),e.prev=2,!(s=n.find((function(e){return e.id===t})))){e.next=7;break}return e.next=7,j("/todos/".concat(t),{completed:!s.completed,title:s.title,userId:_,id:t});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),O(l.Issue);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e,t){return j("/todos/".concat(e),t)},R=Object(u.useCallback)(function(){var e=Object(a.a)(Object(o.a)().mark((function e(t,n){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==n.title){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q(t,n);case 5:B(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O(l.NotUpdated);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),[]),G=Object(u.useMemo)((function(){return n.every((function(e){return e.completed}))}),[n]),H=Object(u.useCallback)(Object(a.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(n.map((function(e){return q(e.id)})));case 3:c(n.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{completed:!G})}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),O(l.NotUpdated);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[n]);return Object(v.jsxs)("div",{className:"todoapp",children:[Object(v.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(v.jsxs)("div",{className:"todoapp__content",children:[Object(v.jsx)(x,{querySearch:T,setQuerySearch:w,handleAddTodo:F,selectAllTodos:H,isAllTodosCompleted:G}),Object(v.jsx)(k,{todos:M,onDelete:V,tempTodo:P,onChange:R}),n.length>0&&Object(v.jsx)(y,{todosShow:M,filterBy:S,setFilterBy:D,deleteTodoCompleted:J})]}),h&&Object(v.jsx)(N,{onClose:function(){O(null)},error:h,onErrorChange:O})]})},T=document.getElementById("root");Object(c.createRoot)(T).render(Object(v.jsx)(E,{}))}},[[22,1,2]]]);
//# sourceMappingURL=main.d395cef9.chunk.js.map